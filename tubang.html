<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英属印度土邦接龙游戏</title>
  <style>
    /* CSS 样式 */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
      background-color: #f9f9f9;
    }
    h1 {
      margin: 20px 0;
    }
    .map {
      display: grid;
      grid-template-columns: repeat(10, 60px);
      grid-template-rows: repeat(10, 60px);
      gap: 2px;
      justify-content: center;
      margin: 0 auto;
      background-color: #e0e0e0;
      padding: 10px;
    }
    .grid {
      width: 60px;
      height: 60px;
      border: 2px dashed #666;
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #fff;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px;
    }
    .card {
      width: 50px;
      height: 50px;
      background-color: #f1c40f;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: grab;
      font-weight: bold;
      color: #333;
      border-radius: 5px;
      user-select: none;
      touch-action: none;
    }
    #info-box {
      margin-top: 10px;
      padding: 10px;
      background-color: #e0e0e0;
      border-radius: 5px;
      width: 90%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    #check-button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>英属印度土邦接龙游戏</h1>
  <p>将土邦或省的卡片拖动到正确的位置，然后点击“检查”按钮。</p>

  <!-- 地图区域 -->
  <div class="map" id="map">
    <!-- 根据需要调整格子的位置 -->
    <div class="grid" data-id="bengal" style="grid-column: 7; grid-row: 4;"></div>
    <div class="grid" data-id="bombay" style="grid-column: 4; grid-row: 6;"></div>
    <div class="grid" data-id="madras" style="grid-column: 6; grid-row: 9;"></div>
    <div class="grid" data-id="hyderabad" style="grid-column: 5; grid-row: 7;"></div>
    <div class="grid" data-id="mysore" style="grid-column: 5; grid-row: 9;"></div>
    <div class="grid" data-id="punjab" style="grid-column: 3; grid-row: 2;"></div>
    <div class="grid" data-id="kashmir" style="grid-column: 3; grid-row: 1;"></div>
    <div class="grid" data-id="rajputana" style="grid-column: 4; grid-row: 4;"></div>
    <div class="grid" data-id="awadh" style="grid-column: 6; grid-row: 3;"></div>
    <div class="grid" data-id="gujarat" style="grid-column: 3; grid-row: 5;"></div>
    <div class="grid" data-id="jaipur" style="grid-column: 5; grid-row: 4;"></div>
    <div class="grid" data-id="bhopal" style="grid-column: 5; grid-row: 5;"></div>
    <div class="grid" data-id="baroda" style="grid-column: 4; grid-row: 5;"></div>
    <div class="grid" data-id="kolhapur" style="grid-column: 4; grid-row: 7;"></div>
    <div class="grid" data-id="sikkim" style="grid-column: 8; grid-row: 2;"></div>
    <div class="grid" data-id="nepal" style="grid-column: 7; grid-row: 2;"></div>
    <div class="grid" data-id="sindh" style="grid-column: 1; grid-row: 5;"></div>
    <div class="grid" data-id="baluchistan" style="grid-column: 1; grid-row: 3;"></div>
    <div class="grid" data-id="coorg" style="grid-column: 5; grid-row: 8;"></div>
    <div class="grid" data-id="nagpur" style="grid-column: 6; grid-row: 5;"></div>
    <div class="grid" data-id="travancore" style="grid-column: 5; grid-row: 10;"></div>
    <div class="grid" data-id="bikaner" style="grid-column: 3; grid-row: 3;"></div>
    <div class="grid" data-id="jodhpur" style="grid-column: 3; grid-row: 4;"></div>
    <div class="grid" data-id="udaipur" style="grid-column: 4; grid-row: 5;"></div>
    <div class="grid" data-id="gwailor" style="grid-column: 5; grid-row: 4;"></div>
    <div class="grid" data-id="patiala" style="grid-column: 4; grid-row: 2;"></div>
    <div class="grid" data-id="kolkata" style="grid-column: 9; grid-row: 4;"></div>
    <div class="grid" data-id="agra" style="grid-column: 6; grid-row: 4;"></div>
    <div class="grid" data-id="lahore" style="grid-column: 3; grid-row: 1;"></div>
    <div class="grid" data-id="lucknow" style="grid-column: 7; grid-row: 3;"></div>
  </div>

  <!-- 卡片区域 -->
  <div class="cards" id="card-container">
    <!-- 卡片将在JavaScript中随机生成 -->
  </div>

  <!-- 信息展示区域 -->
  <div id="info-box">请拖动卡片到正确的位置，然后点击“检查”按钮。</div>

  <!-- 检查按钮 -->
  <button id="check-button">检查</button>

  <script>
    // JavaScript功能
    document.addEventListener("DOMContentLoaded", () => {
      const regions = [
        { id: "bengal", name: "孟加拉省" },
        { id: "bombay", name: "孟买省" },
        { id: "madras", name: "马德拉斯省" },
        { id: "hyderabad", name: "海德拉巴土邦" },
        { id: "mysore", name: "迈索尔土邦" },
        { id: "punjab", name: "旁遮普省" },
        { id: "kashmir", name: "克什米尔土邦" },
        { id: "rajputana", name: "拉杰普塔纳" },
        { id: "awadh", name: "阿瓦德" },
        { id: "gujarat", name: "古吉拉特" },
        { id: "jaipur", name: "斋普尔" },
        { id: "bhopal", name: "博帕尔" },
        { id: "baroda", name: "巴罗达" },
        { id: "kolhapur", name: "科尔哈普尔" },
        { id: "sikkim", name: "锡金" },
        { id: "nepal", name: "尼泊尔" },
        { id: "sindh", name: "信德省" },
        { id: "baluchistan", name: "俾路支斯坦" },
        { id: "coorg", name: "库格" },
        { id: "nagpur", name: "那格浦尔" },
        { id: "travancore", name: "特拉凡哥尔" },
        { id: "bikaner", name: "比卡内尔" },
        { id: "jodhpur", name: "焦特布尔" },
        { id: "udaipur", name: "乌代浦尔" },
        { id: "gwailor", name: "瓜利尔" },
        { id: "patiala", name: "巴提亚拉" },
        { id: "kolkata", name: "加尔各答" },
        { id: "agra", name: "阿格拉" },
        { id: "lahore", name: "拉合尔" },
        { id: "lucknow", name: "勒克瑙" },
      ];

      const cardContainer = document.getElementById("card-container");
      const infoBox = document.getElementById("info-box");
      const checkButton = document.getElementById("check-button");

      // 随机打乱卡片顺序
      const shuffledRegions = regions.sort(() => 0.5 - Math.random());

      // 创建卡片
      shuffledRegions.forEach(region => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.setAttribute("draggable", "true");
        card.dataset.id = region.id;
        card.textContent = region.name;
        cardContainer.appendChild(card);

        // 触摸事件处理
        card.addEventListener("touchstart", touchStart, { passive: false });
        card.addEventListener("touchmove", touchMove, { passive: false });
        card.addEventListener("touchend", touchEnd);
        card.addEventListener("touchcancel", touchEnd);

        // 拖拽事件处理
        card.addEventListener("dragstart", dragStart);
      });

      const grids = document.querySelectorAll(".grid");
      grids.forEach(grid => {
        grid.addEventListener("dragover", dragOver);
        grid.addEventListener("drop", dropCard);
        grid.addEventListener("click", showInfo);
        grid.addEventListener("touchmove", (e) => { e.preventDefault(); }, { passive: false });
      });

      let draggedCard = null;
      let offsetX = 0;
      let offsetY = 0;

      function touchStart(event) {
        draggedCard = event.target;
        const touch = event.targetTouches[0];
        offsetX = touch.clientX - draggedCard.getBoundingClientRect().left;
        offsetY = touch.clientY - draggedCard.getBoundingClientRect().top;
        draggedCard.style.position = "absolute";
        draggedCard.style.zIndex = 1000;
        document.body.appendChild(draggedCard);
      }

      function touchMove(event) {
        event.preventDefault();
        const touch = event.targetTouches[0];
        draggedCard.style.left = touch.clientX - offsetX + "px";
        draggedCard.style.top = touch.clientY - offsetY + "px";
      }

      function touchEnd(event) {
        const touch = event.changedTouches[0];
        const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
        if (dropTarget && dropTarget.classList.contains("grid")) {
          dropCard({ target: dropTarget });
        } else {
          draggedCard.style.position = "static";
          draggedCard.style.left = "";
          draggedCard.style.top = "";
          cardContainer.appendChild(draggedCard);
        }
        draggedCard.style.zIndex = "";
        draggedCard = null;
      }

      function dragStart(event) {
        draggedCard = event.target;
        event.dataTransfer.setData("text/plain", event.target.dataset.id);
      }

      function dragOver(event) {
        event.preventDefault();
      }

      function dropCard(event) {
        event.preventDefault();
        const cardId = draggedCard ? draggedCard.dataset.id : event.dataTransfer.getData("text");
        const card = document.querySelector(`.card[data-id="${cardId}"]`);
        if (event.target.classList.contains("grid") && !event.target.firstChild) {
          event.target.appendChild(card);
          card.style.position = "static";
          card.style.left = "";
          card.style.top = "";
          card.setAttribute("draggable", false);
          card.removeEventListener("touchstart", touchStart);
          card.removeEventListener("touchmove", touchMove);
          card.removeEventListener("touchend", touchEnd);
        } else {
          infoBox.textContent = "此位置已被占用或无效。";
          cardContainer.appendChild(card);
        }
      }

      function showInfo(event) {
        const regionId = event.currentTarget.dataset.id;
        const region = regions.find(r => r.id === regionId);
        if (region) {
          const info = getRegionInfo(regionId);
          infoBox.textContent = info;
        }
      }

      function getRegionInfo(regionId) {
        const infoData = {
          bengal: "孟加拉省：英国在19世纪的一个重要行政区，以加尔各答为中心。",
          bombay: "孟买省：英属印度的重要港口，经济和贸易的核心。",
          madras: "马德拉斯省：位于印度南部，殖民时期的战略基地。",
          hyderabad: "海德拉巴土邦：强大的土邦之一，有着丰富的历史文化。",
          mysore: "迈索尔土邦：以其建筑和文化遗产而闻名的南印度土邦。",
          // 添加其他土邦和省的信息
        };
        return infoData[regionId] || "没有相关信息。";
      }

      checkButton.addEventListener("click", () => {
        grids.forEach(grid => {
          if (grid.firstChild) {
            if (grid.dataset.id === grid.firstChild.dataset.id) {
              grid.style.border = "2px solid #006400"; // 深绿色边框
              grid.style.backgroundColor = "#90ee90"; // 浅绿色填充
            } else {
              grid.style.border = "2px solid red"; // 红色边框
              grid.style.backgroundColor = "#fff";
            }
          } else {
            grid.style.border = "2px dashed #666";
            grid.style.backgroundColor = "#fff";
          }
        });
      });
    });
  </script>
</body>
</html>
