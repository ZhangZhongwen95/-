<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英属印度土邦接龙游戏</title>
  <style>
    /* CSS 样式 */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    h1 {
      margin: 10px 0;
      text-align: center;
    }
    .game-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .map-container {
      position: relative;
      flex: 1;
      background-image: url('https://i.imgur.com/5u6z30T.png'); /* 简化的印度地图背景 */
      background-size: cover;
      background-position: center;
    }
    .grid {
      position: absolute;
      width: 10%;
      height: 10%;
      border: 2px dashed rgba(102, 102, 102, 0.7);
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(255, 255, 255, 0.5);
    }
    .cards-container {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding: 10px;
      background-color: #fff;
    }
    .card {
      min-width: 80px;
      height: 80px;
      margin-right: 10px;
      background-color: #f1c40f;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: grab;
      font-weight: bold;
      color: #333;
      border-radius: 5px;
      user-select: none;
      touch-action: none;
      flex-shrink: 0;
    }
    #info-box {
      padding: 10px;
      background-color: #e0e0e0;
      text-align: center;
    }
    #check-button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>英属印度土邦接龙游戏</h1>

  <div class="game-container">
    <!-- 地图区域 -->
    <div class="map-container" id="map">
      <!-- 格子，位置根据印度地图坐标调整 -->
      <div class="grid" data-id="bengal" style="left: 70%; top: 40%;"></div>
      <div class="grid" data-id="bombay" style="left: 40%; top: 60%;"></div>
      <div class="grid" data-id="madras" style="left: 60%; top: 80%;"></div>
      <!-- 继续添加其他格子 -->
      <!-- 为了简洁，这里只展示部分格子 -->
    </div>

    <!-- 卡片区域 -->
    <div class="cards-container" id="card-container">
      <!-- 卡片将在JavaScript中随机生成 -->
    </div>
  </div>

  <!-- 信息展示区域 -->
  <div id="info-box">请拖动卡片到正确的位置，然后点击“检查”按钮。</div>

  <!-- 检查按钮 -->
  <button id="check-button">检查</button>

  <script>
    // JavaScript功能
    document.addEventListener("DOMContentLoaded", () => {
      const regions = [
        { id: "bengal", name: "孟加拉省", info: "孟加拉省：英国在19世纪的一个重要行政区，以加尔各答为中心。" },
        { id: "bombay", name: "孟买省", info: "孟买省：英属印度的重要港口，经济和贸易的核心。" },
        { id: "madras", name: "马德拉斯省", info: "马德拉斯省：位于印度南部，殖民时期的战略基地。" },
        // 添加其他地区的信息
      ];

      const cardContainer = document.getElementById("card-container");
      const infoBox = document.getElementById("info-box");
      const checkButton = document.getElementById("check-button");

      // 随机打乱卡片顺序
      const shuffledRegions = regions.sort(() => 0.5 - Math.random());

      // 创建卡片
      shuffledRegions.forEach(region => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.setAttribute("draggable", "true");
        card.dataset.id = region.id;
        card.textContent = region.name;
        cardContainer.appendChild(card);

        // 点击卡片显示信息
        card.addEventListener("click", () => {
          infoBox.textContent = region.info;
        });

        // 触摸事件处理
        card.addEventListener("touchstart", touchStart, { passive: false });
        card.addEventListener("touchmove", touchMove, { passive: false });
        card.addEventListener("touchend", touchEnd);
        card.addEventListener("touchcancel", touchEnd);

        // 拖拽事件处理
        card.addEventListener("dragstart", dragStart);
      });

      const grids = document.querySelectorAll(".grid");
      grids.forEach(grid => {
        grid.addEventListener("dragover", dragOver);
        grid.addEventListener("drop", dropCard);
        grid.addEventListener("click", () => {
          const region = regions.find(r => r.id === grid.dataset.id);
          if (grid.firstChild && grid.firstChild.dataset.id === grid.dataset.id) {
            infoBox.textContent = region.info;
          } else {
            infoBox.textContent = "此位置的卡片尚未正确放置。";
          }
        });
      });

      let draggedCard = null;
      let offsetX = 0;
      let offsetY = 0;

      function touchStart(event) {
        draggedCard = event.target;
        const touch = event.targetTouches[0];
        offsetX = touch.clientX - draggedCard.getBoundingClientRect().left;
        offsetY = touch.clientY - draggedCard.getBoundingClientRect().top;
        draggedCard.style.position = "absolute";
        draggedCard.style.zIndex = 1000;
        document.body.appendChild(draggedCard);
      }

      function touchMove(event) {
        event.preventDefault();
        const touch = event.targetTouches[0];
        draggedCard.style.left = touch.clientX - offsetX + "px";
        draggedCard.style.top = touch.clientY - offsetY + "px";
      }

      function touchEnd(event) {
        const touch = event.changedTouches[0];
        const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
        if (dropTarget && dropTarget.classList.contains("grid")) {
          dropCard({ target: dropTarget });
        } else {
          draggedCard.style.position = "static";
          draggedCard.style.left = "";
          draggedCard.style.top = "";
          cardContainer.appendChild(draggedCard);
        }
        draggedCard.style.zIndex = "";
        draggedCard = null;
      }

      function dragStart(event) {
        draggedCard = event.target;
        event.dataTransfer.setData("text/plain", event.target.dataset.id);
      }

      function dragOver(event) {
        event.preventDefault();
      }

      function dropCard(event) {
        event.preventDefault();
        const cardId = draggedCard ? draggedCard.dataset.id : event.dataTransfer.getData("text");
        const card = document.querySelector(`.card[data-id="${cardId}"]`);
        if (event.target.classList.contains("grid")) {
          if (event.target.firstChild) {
            // 如果格子已被占用，返回卡片区域
            card.style.position = "static";
            card.style.left = "";
            card.style.top = "";
            cardContainer.appendChild(card);
            infoBox.textContent = "此位置已被占用。";
          } else {
            event.target.appendChild(card);
            card.style.position = "static";
            card.style.left = "";
            card.style.top = "";
          }
        } else {
          // 如果未放在格子上，返回卡片区域
          card.style.position = "static";
          card.style.left = "";
          card.style.top = "";
          cardContainer.appendChild(card);
        }
      }

      checkButton.addEventListener("click", () => {
        grids.forEach(grid => {
          if (grid.firstChild) {
            if (grid.dataset.id === grid.firstChild.dataset.id) {
              grid.style.border = "2px solid #006400"; // 深绿色边框
              grid.style.backgroundColor = "#90ee90"; // 浅绿色填充
            } else {
              grid.style.border = "2px solid red"; // 红色边框
              grid.style.backgroundColor = "#fff";
            }
          } else {
            grid.style.border = "2px dashed rgba(102, 102, 102, 0.7)";
            grid.style.backgroundColor = "rgba(255, 255, 255, 0.5)";
          }
        });
      });
    });
  </script>
</body>
</html>
